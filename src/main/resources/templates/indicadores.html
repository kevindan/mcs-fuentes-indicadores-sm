<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org" lang="es">
<head>
    <meta charset="UTF-8">
    <title>Indicadores Salud Mental</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
</head>
<body class="bg-light text-dark">

<header class="bg-primary text-white p-4 shadow d-flex justify-content-between align-items-center">
    <div>
        <h1 class="h3 fw-bold">🧠 Observatorio de Salud Mental</h1>
        <p class="mb-0 small">Carga de archivos fuente de entidades externas</p>
    </div>
    <span class="small">Gestión de archivos CSV</span>
</header>

<main class="container my-5">
    <section class="bg-white p-4 rounded shadow mb-5">
        <div class="d-flex justify-content-between align-items-center mb-3">
            <h2 class="h5">📁 Subir archivo CSV</h2>
            <small class="text-muted">* Solo se aceptan archivos .csv</small>
        </div>
        <p class="text-muted small mb-3">
            Este módulo permite cargar los datos en formato CSV que alimentarán el sistema de monitoreo de indicadores.
        </p>

        <form th:action="@{/operaciones/carga/tabla}" method="post" enctype="multipart/form-data">
            <div class="mb-3">
                <input type="file" name="file" accept=".csv" class="form-control" required />
            </div>
            <div class="d-flex gap-2">
                <button type="submit" class="btn btn-success">📤 Subir</button>
                <button type="reset" class="btn btn-secondary">❌ Limpiar</button>
            </div>
        </form>

        <div class="mt-3 alert alert-info" th:if="${message}" th:text="${message}"></div>
    </section>

    <section class="bg-white p-4 rounded shadow">
        <h2 class="h5 mb-3">📊 Tablas Cargadas</h2>
        <div th:if="${#lists.isEmpty(tables)}" class="text-muted">No hay tablas registradas.</div>
        <ul class="list-group" th:if="${!#lists.isEmpty(tables)}">
            <li class="list-group-item d-flex justify-content-between align-items-center"
                th:each="table : ${tables}">
                <span>📌 <span th:text="${table}"></span></span>
                <form th:action="@{'/operaciones/mantenimiento/tabla/' + ${table}}" method="post"
                      onsubmit="return confirm('¿Estás seguro de eliminar la tabla?');">
                    <input type="hidden" name="_method" value="delete"/>
                    <button type="submit" class="btn btn-sm btn-danger">🗑 Eliminar</button>
                </form>
            </li>
        </ul>
    </section>
</main>

<footer class="bg-primary text-white text-center py-3 small">
    Fuente: HISMINSA | Fecha de corte: 13 mayo 2025
</footer>

<script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>
</body>
</html>